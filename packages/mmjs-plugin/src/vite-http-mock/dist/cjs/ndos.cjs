"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const f=require("node:fs"),d=require("node:path"),y=require("./utils.cjs");async function u(e,i={}){const{filter:c=F,recursive:l=!1,exclude:t}=i;try{const r=[];if(!y.fileExists(e))return r;const o=await f.promises.readdir(e,{withFileTypes:!0});return await Promise.all(o.map(async s=>{const n=d.join(e,s.name);if(!(t&&t.test(s.name))){if(s.isFile()&&c(s,n))r.push(n);else if(s.isDirectory()&&l){const a=await u(n,i);r.push(...a)}}})),r}catch(r){return console.error(`Error reading directory ${e}:`,r),[]}}function F(e,i){return e.name.includes("$id")}exports.enhancedFindFiles=u;
