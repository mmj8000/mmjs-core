"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const m=require("node:fs"),t=require("./options.cjs"),B=require("node:path"),y=require("node:fs/promises"),p=require("mime-types"),x={black:"\x1B[30m",red:"\x1B[31m",green:"\x1B[32m",yellow:"\x1B[33m",blue:"\x1B[34m",magenta:"\x1B[35m",cyan:"\x1B[36m",white:"\x1B[37m",gray:"\x1B[90m",bgBlack:"\x1B[40m",bgRed:"\x1B[41m",bgGreen:"\x1B[42m",bgYellow:"\x1B[43m",bgBlue:"\x1B[44m",bgMagenta:"\x1B[45m",bgCyan:"\x1B[46m",bgWhite:"\x1B[47m",reset:"\x1B[0m",bright:"\x1B[1m",dim:"\x1B[2m",italic:"\x1B[3m",underline:"\x1B[4m",blink:"\x1B[5m",reverse:"\x1B[7m",hidden:"\x1B[8m"};function a(e,...r){return r.map(n=>x[n]).join("")+e+x.reset}function u(){return a(new Date().toLocaleTimeString(),"gray")+" "+a("[Mock]","cyan","bold")}let l="";const o={success(e){if(l!==e)return l=e,t.logLevelState.isLogSuccess&&console.log(`${u()}`,a(e,"green"))},info(e){if(l!==e)return l=e,t.logLevelState.isLogInfo&&console.log(`${u()}`,e)},wran(e){if(l!==e)return l=e,t.logLevelState.isLogWarn&&console.log(`${u()}`,a(e,"yellow"))},error(e){if(l!==e)return l=e,console.log(`${u()}`,a(e,"red"))}},h={success(e){o.success(e)},info(e){o.info(e)},wran(e){o.wran(e)},error(e){o.error(e)}};function f(e){try{const r=B.dirname(e);m.existsSync(r)||m.mkdirSync(r,{recursive:!0})}catch(r){o.error(r)}}function w(e,r,n,s=!0){f(e),m.writeFile(e,r,n,i=>{i?o.wran(i):s&&o.success(`ðŸ’§ Write File Successify ${e}`)})}async function d(e,r,n,s=!0){f(e);try{await y.appendFile(e,r,n),s&&o.success(`ðŸ’§ Append File Successify ${e}`)}catch(i){o.wran(i)}}function b(e){const r=e.match(/^(https?):\/\/([^\/:]+)(?::(\d+))?(\/.*)?$/i);if(!r)return"invalid_url";const n=r[1],s=r[2],i=r[3]||(n==="https"?"443":"80"),c=(r[4]||"").replace(/\//g,"_");let g=`${s}_${i}`;return c&&c!=="_"&&(g+=c),g.replace(/[^a-z0-9_]/gi,"_").replace(/_+/g,"_").toLowerCase()}function C(e){var g;let r=p.charset(e)||t.allowCharset[0];r=r.toLocaleLowerCase();let n=p.extension(e)||t.serverConfig.fileExt.slice(1),s=!((g=t.serverConfig.templateMimeType)!=null&&g.length)||t.serverConfig.templateMimeType.includes(n),i=t.serverConfig.fileExt,c=t.allowCharset.includes(r)?r:t.allowCharset[0];return s?c=t.allowCharset[0]:i=`.${n}`,{charset:r,encoding:c,isInnerTempType:s,fileExt:i,mimeType:n}}function S(e){return p.contentType(e)}exports.appendFileFn=d;exports.colorize=a;exports.existsSyncByMkdir=f;exports.getContentTypeByPath=S;exports.logger=h;exports.non_write_loggger=o;exports.safeUrlToFilename=b;exports.useContentType=C;exports.writeMockFile=w;
