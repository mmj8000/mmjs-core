"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const u=require("node:querystring");function o(e){if(!(e!=null&&e.url))return Reflect.set(e,"query",{});const t=new URL(e.url,`http://${e.headers.host||"localhost"}`);return Reflect.set(e,"query",Object.fromEntries(t.searchParams.entries())??{})}async function n(e){return new Promise((t,r)=>{let a="";e.on("data",s=>a+=s),e.on("end",()=>{try{a||t({});const s=e.headers["content-type"];s!=null&&s.includes("application/json")?t(JSON.parse(a)):s!=null&&s.includes("application/x-www-form-urlencoded")?t(u.parse(a)):t(a)}catch(s){r(s)}}),e.on("error",r)})}async function c(e){try{Reflect.set(e,"body",await n(e))}catch{Reflect.set(e,"body",{})}}exports.parseRequestBody=n;exports.useParseBody=c;exports.useParseQueryParams=o;
