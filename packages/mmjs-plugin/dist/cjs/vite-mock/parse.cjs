"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const u=require("node:querystring"),o=require("./options.cjs");function i(e){if(!(e!=null&&e.url))return Reflect.set(e,"query",{});const s=new URL(e.url,`http://${e.headers.host||"localhost"}`);return Reflect.set(e,"query",Object.fromEntries(s.searchParams.entries())??{})}async function a(e){return new Promise((s,n)=>{let r="";e.on("data",t=>r+=t),e.on("end",()=>{try{r||s({});const t=e.headers["content-type"];t!=null&&t.includes("application/json")?s(JSON.parse(r)):t!=null&&t.includes("application/x-www-form-urlencoded")?s(u.parse(r)):s(r)}catch(t){n(t)}}),e.on("error",n)})}async function c(e){try{Reflect.set(e,"body",await a(e))}catch{Reflect.set(e,"body",{})}}function f(e){if(![".js",".ts"].includes(o.serverConfig.fileExt))return e;const s=JSON.stringify(e||{},void 0,4);return o.serverConfig._esm?`export const enabled = true;
export const mock = () => (${s})
`:`exports.enabled = true;
exports.mock = () => (${s})
`}exports.parseRequestBody=a;exports.transformInnerCodeTempate=f;exports.useParseBody=c;exports.useParseQueryParams=i;
