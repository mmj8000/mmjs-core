"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const a=require("node:querystring"),u=require("./options.cjs");function c(e){if(!(e!=null&&e.url))return Reflect.set(e,"query",{});const s=new URL(e.url,`http://${e.headers.host||"localhost"}`);return Reflect.set(e,"query",Object.fromEntries(s.searchParams.entries())??{})}async function o(e){return new Promise((s,n)=>{let r="";e.on("data",t=>r+=t),e.on("end",()=>{try{r||s({});const t=e.headers["content-type"];t!=null&&t.includes("application/json")?s(JSON.parse(r)):t!=null&&t.includes("application/x-www-form-urlencoded")?s(a.parse(r)):s(r)}catch(t){n(t)}}),e.on("error",n)})}async function i(e){try{Reflect.set(e,"body",await o(e))}catch{Reflect.set(e,"body",{})}}function d(e){const s=JSON.stringify(e||{},void 0,4);return u.serverConfig._esm?`export const enabled = true;
export const mock = () => (${s})
`:`exports.enabled = true;
exports.mock = () => (${s})
`}exports.parseRequestBody=o;exports.transformInnerCodeTempate=d;exports.useParseBody=i;exports.useParseQueryParams=c;
