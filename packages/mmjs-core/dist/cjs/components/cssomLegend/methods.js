"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const h=require("./help.const.js"),y=require("./filters.js"),m=require("./tools.js"),S=require("mmjs-share/utils"),b=require("./transform.js");function P(t,r){var e;return((e=t==null?void 0:t.selected)==null?void 0:e[r])??!0}function x(t,r){var s;const e=typeof(t==null?void 0:t.formatter)=="function"?t==null?void 0:t.formatter(r):t.formatter??r;return(s=t==null?void 0:t.textStyle)!=null&&s.rich?j({legend:t,richName:e}):e}function $(t){var s;const r={},e=((s=t.textStyle)==null?void 0:s.rich)??{};for(let n in e){const o=e[n];if(o)for(let c in o)r[`--textStyle-${c}`]=o[c]}return r}function j({legend:t,richName:r}){return m.parseRichFormatString(r).map(e=>{var s,n,o;switch(e.type){case"rich":const u=(((s=t.textStyle)==null?void 0:s.rich)??{})[e==null?void 0:e.name],i={};return f(u,i,"rich-textStyle",y.transformTextStyle),`<span style="${Object.entries(i).map(a=>a.join(":")).join(";")}" class="cssom_legend-rich cssom_legend-rich--${e.name}">${e.content}</span>`;case"text":return(o=(n=e.content)==null?void 0:n.replaceAll(" ","&nbsp;"))==null?void 0:o.replaceAll(`
`,"<br />");default:return""}}).join("")}function k(t){const r={};return f(t,r,"",y.transformCss),{...r}}function f(t,r,e,s){for(let n in t){const o=t[n];if(S.isPlainObject(o))f(o,r,n,s);else if(typeof o!="function"&&o!==null){const u=[e,n].filter(Boolean).join("-"),i=s[n]??s.default,l={value:o,record:t,effectProp:r,key:n,parentKey:e},a=i(l),p=b.transfromState.transform(a,l);r[`--${u}`]=p}}}function q(t,r){var s,n,o,c;const e=[];return t?e.push(`legend-icon--${h.innerIocnNames[t]??t}`):(s=r.serie)!=null&&s.type?e.push(`legend-icon--${(n=r.serie)==null?void 0:n.type}`):t||e.push("legend-icon--roundRect"),(o=r.serie)!=null&&o.symbol&&e.push(`legend-symbol--${(c=r.serie)==null?void 0:c.symbol}`),e}exports.forPropertsEffect=f;exports.formatter=x;exports.getCustomLegendProperty=k;exports.getIconModified=q;exports.getSelectStatus=P;exports.useRichStyleProperties=$;
