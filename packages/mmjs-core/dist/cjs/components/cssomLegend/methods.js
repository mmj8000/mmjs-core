"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const h=require("./help.const.js"),l=require("./filters.js");function p(t,n){var e;return((e=t==null?void 0:t.selected)==null?void 0:e[n])??!0}function x(t,n){var r;const e=typeof(t==null?void 0:t.formatter)=="function"?t==null?void 0:t.formatter(n):t.formatter??n;return(r=t==null?void 0:t.textStyle)!=null&&r.rich?b({legend:t,richName:e}):e}function S(t){var r;const n={},e=((r=t.textStyle)==null?void 0:r.rich)??{};for(let i in e){const s=e[i];if(s)for(let c in s)n[`--textStyle-${c}`]=s[c]}return n}function b({legend:t,richName:n}){return m(n).map(e=>{var r,i,s;switch(e.type){case"rich":const c=[],u=(((r=t.textStyle)==null?void 0:r.rich)??{})[e==null?void 0:e.name];for(let o in u){const a=l.transformTextStyle[o]??l.transformTextStyle.default;c.push(`--rich-textStyle-${o}: ${a({value:u[o]})}`)}return`<span style="${c.join(";")}" class="cssom_legend-rich cssom_legend-rich--${e.name}">${e.content}</span>`;case"text":return(s=(i=e.content)==null?void 0:i.replaceAll(" ","&nbsp;"))==null?void 0:s.replaceAll(`
`,"<br />");default:return""}}).join("")}function $(t){const n={};return y(t,n,""),{...n}}function y(t,n,e=""){for(let r in t){const i=t[r];typeof i=="string"||typeof i=="number"?N(e,r,n,i,t):Object.prototype.toString.call(i)==="[object Object]"&&y(i,n,r)}}function N(t,n,e,r,i){const c=[t,n].filter(Boolean).join("-");if(h.matchCenterKey.includes(n)&&r==="center"){e["--custom-root-justify"]="center";return}const f=l.transformCss[n];e[`--${c}`]=f?f(r,i,e):l.transformCss.default(r,i,e)}function g(t,n){var r,i,s,c;const e=[];return t?e.push(`legend-icon--${h.innerIocnNames[t]??t}`):(r=n.serie)!=null&&r.type?e.push(`legend-icon--${(i=n.serie)==null?void 0:i.type}`):t||e.push("legend-icon--roundRect"),(s=n.serie)!=null&&s.symbol&&e.push(`legend-symbol--${(c=n.serie)==null?void 0:c.symbol}`),e}function j(t=""){let n=1/0,e=1/0,r=-1/0,i=-1/0;const s=t.match(/[a-df-z][^a-df-z]*/gi);return s==null||s.forEach(c=>{const f=c.slice(1).trim().split(/[\s,]+/).map(Number);for(let u=0;u<f.length;u+=2){const o=f[u],a=f[u+1];isNaN(o)||(n=Math.min(n,o)),isNaN(a)||(e=Math.min(e,a)),isNaN(o)||(r=Math.max(r,o)),isNaN(a)||(i=Math.max(i,a))}}),`${n} ${e} ${r-n+2} ${i-e+2}`}function m(t){const n=[],e=/\{([^}|]+)\|([^}]+)\}/g;let r,i=0;for(;(r=e.exec(t))!==null;)r.index>i&&n.push({type:"text",content:t.substring(i,r.index)}),n.push({type:"rich",name:r[1],content:r[2]??""}),i=r.index+r[0].length;return i<t.length&&n.push({type:"text",content:t.substring(i)}),n}exports.calculateViewBox=j;exports.formatter=x;exports.getCustomLegendProperty=$;exports.getIconModified=g;exports.getSelectStatus=p;exports.parseRichFormatString=m;exports.useRichStyleProperties=S;
